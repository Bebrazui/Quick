"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/webrtc.ts":
/*!***************************!*\
  !*** ./src/lib/webrtc.ts ***!
  \***************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webrtcManager: function() { return /* binding */ webrtcManager; }\n/* harmony export */ });\n/* harmony import */ var _nostr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./nostr */ \"(app-pages-browser)/./src/lib/nostr.ts\");\n\nconst ICE_CONFIG = {\n    iceServers: [\n        {\n            urls: \"stun:stun.l.google.com:19302\"\n        },\n        {\n            urls: \"stun:stun1.l.google.com:19302\"\n        },\n        {\n            urls: \"stun:stun.cloudflare.com:3478\"\n        },\n        {\n            urls: \"turn:openrelay.metered.ca:80\",\n            username: \"openrelayproject\",\n            credential: \"openrelayproject\"\n        },\n        {\n            urls: \"turn:openrelay.metered.ca:443\",\n            username: \"openrelayproject\",\n            credential: \"openrelayproject\"\n        },\n        {\n            urls: \"turn:openrelay.metered.ca:443?transport=tcp\",\n            username: \"openrelayproject\",\n            credential: \"openrelayproject\"\n        }\n    ],\n    iceCandidatePoolSize: 10\n};\nclass WebRTCManager {\n    get callState() {\n        return this._callState;\n    }\n    get remotePubkey() {\n        return this._remotePubkey;\n    }\n    get callType() {\n        return this._callType;\n    }\n    get callStartTime() {\n        return this._callStartTime;\n    }\n    onStateChange(cb) {\n        this.stateCallbacks.add(cb);\n        return ()=>{\n            this.stateCallbacks.delete(cb);\n        };\n    }\n    onStream(cb) {\n        this.streamCallbacks.add(cb);\n        return ()=>{\n            this.streamCallbacks.delete(cb);\n        };\n    }\n    setState(state, error) {\n        this._callState = state;\n        if (state === \"connected\") {\n            this._callStartTime = Date.now();\n            this.stopRingtone();\n        }\n        if (state === \"idle\" || state === \"ended\") this.stopRingtone();\n        this.stateCallbacks.forEach((cb)=>cb(state, this._remotePubkey, this._callType, error));\n    }\n    notifyStreams() {\n        this.streamCallbacks.forEach((cb)=>cb(this.localStream, this.remoteStream));\n    }\n    playRingtone() {\n        this.stopRingtone();\n        try {\n            this.audioCtx = new AudioContext();\n            this.audioOsc = this.audioCtx.createOscillator();\n            const gain = this.audioCtx.createGain();\n            this.audioOsc.connect(gain);\n            gain.connect(this.audioCtx.destination);\n            this.audioOsc.frequency.value = 440;\n            gain.gain.value = 0.08;\n            this.audioOsc.start();\n            const ctx = this.audioCtx;\n            const pulse = ()=>{\n                if (this._callState !== \"ringing\" || !this.audioCtx) {\n                    try {\n                        var _this_audioOsc;\n                        (_this_audioOsc = this.audioOsc) === null || _this_audioOsc === void 0 ? void 0 : _this_audioOsc.stop();\n                        ctx.close();\n                    } catch (e) {}\n                    return;\n                }\n                gain.gain.setValueAtTime(0.08, ctx.currentTime);\n                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);\n                setTimeout(pulse, 1200);\n            };\n            pulse();\n        } catch (e) {}\n    }\n    stopRingtone() {\n        try {\n            var _this_audioOsc;\n            (_this_audioOsc = this.audioOsc) === null || _this_audioOsc === void 0 ? void 0 : _this_audioOsc.stop();\n        } catch (e) {}\n        try {\n            var _this_audioCtx;\n            (_this_audioCtx = this.audioCtx) === null || _this_audioCtx === void 0 ? void 0 : _this_audioCtx.close();\n        } catch (e) {}\n        this.audioOsc = null;\n        this.audioCtx = null;\n    }\n    init() {\n        if (this._unsubSignal) return;\n        this._unsubSignal = _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.onSignal((from, signal)=>{\n            this.handleSignal(from, signal);\n        });\n        window.addEventListener(\"beforeunload\", this.boundEndCall);\n    }\n    destroy() {\n        window.removeEventListener(\"beforeunload\", this.boundEndCall);\n        if (this._unsubSignal) {\n            this._unsubSignal();\n            this._unsubSignal = null;\n        }\n        this.cleanup(false);\n    }\n    async handleSignal(from, signal) {\n        switch(signal.type){\n            case \"call-request\":\n                if (this._callState !== \"idle\") {\n                    _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(from, {\n                        type: \"call-reject\"\n                    }).catch(()=>{});\n                    return;\n                }\n                this._remotePubkey = from;\n                this._callType = signal.callType || \"audio\";\n                this.setState(\"ringing\");\n                this.playRingtone();\n                this.callTimeout = setTimeout(()=>{\n                    if (this._callState === \"ringing\") this.rejectCall();\n                }, 45000);\n                break;\n            case \"call-accept\":\n                if (this._callState === \"calling\" && this._remotePubkey === from) {\n                    this.clearRetry();\n                    this.clearCallTimeout();\n                    this.setState(\"connecting\");\n                    await this.startWebRTC(true);\n                }\n                break;\n            case \"call-reject\":\n                if (this._remotePubkey === from) {\n                    this.cleanup(false);\n                    this.setState(\"idle\", \"Звонок отклонён\");\n                }\n                break;\n            case \"call-end\":\n                if (this._remotePubkey === from) this.cleanup(false);\n                break;\n            case \"webrtc-offer\":\n                if (this._remotePubkey === from && signal.sdp) await this.handleOffer(signal.sdp);\n                break;\n            case \"webrtc-answer\":\n                if (this._remotePubkey === from && signal.sdp) await this.handleAnswer(signal.sdp);\n                break;\n            case \"webrtc-ice\":\n                if (this._remotePubkey === from && signal.candidate) await this.handleIceCandidate(signal.candidate);\n                break;\n        }\n    }\n    clearCallTimeout() {\n        if (this.callTimeout) {\n            clearTimeout(this.callTimeout);\n            this.callTimeout = null;\n        }\n    }\n    clearRetry() {\n        if (this.retryInterval) {\n            clearInterval(this.retryInterval);\n            this.retryInterval = null;\n        }\n    }\n    async initiateCall(pubkey, type) {\n        if (this._callState !== \"idle\") return;\n        // Захватываем медиа СРАЗУ — если не получится, сообщаем до начала звонка\n        try {\n            this.preStream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    echoCancellation: true,\n                    noiseSuppression: true,\n                    autoGainControl: true\n                },\n                video: type === \"video\" ? {\n                    width: {\n                        ideal: 1280\n                    },\n                    height: {\n                        ideal: 720\n                    },\n                    facingMode: \"user\"\n                } : false\n            });\n        } catch (err) {\n            // Если видео не получилось — пробуем только аудио\n            if (type === \"video\") {\n                try {\n                    this.preStream = await navigator.mediaDevices.getUserMedia({\n                        audio: true,\n                        video: false\n                    });\n                    type = \"audio\";\n                } catch (e) {\n                    this.setState(\"idle\", this.mediaErrorMsg(err));\n                    return;\n                }\n            } else {\n                this.setState(\"idle\", this.mediaErrorMsg(err));\n                return;\n            }\n        }\n        this._remotePubkey = pubkey;\n        this._callType = type;\n        this.setState(\"calling\");\n        // Отправляем call-request и повторяем каждые 3 сек (Nostr ненадёжен)\n        const sendReq = ()=>{\n            _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(pubkey, {\n                type: \"call-request\",\n                callType: type\n            }).catch(()=>{});\n        };\n        sendReq();\n        this.retryInterval = setInterval(()=>{\n            if (this._callState === \"calling\") sendReq();\n            else this.clearRetry();\n        }, 3000);\n        // Таймаут 40 сек\n        this.callTimeout = setTimeout(()=>{\n            if (this._callState === \"calling\") {\n                this.cleanup(true);\n                this.setState(\"idle\", \"Нет ответа\");\n            }\n        }, 40000);\n    }\n    async acceptCall() {\n        if (this._callState !== \"ringing\" || !this._remotePubkey) return;\n        this.clearCallTimeout();\n        this.stopRingtone();\n        this.setState(\"connecting\");\n        // Захватываем медиа при принятии\n        try {\n            this.preStream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    echoCancellation: true,\n                    noiseSuppression: true,\n                    autoGainControl: true\n                },\n                video: this._callType === \"video\" ? {\n                    width: {\n                        ideal: 1280\n                    },\n                    height: {\n                        ideal: 720\n                    },\n                    facingMode: \"user\"\n                } : false\n            });\n        } catch (err) {\n            if (this._callType === \"video\") {\n                try {\n                    this.preStream = await navigator.mediaDevices.getUserMedia({\n                        audio: true\n                    });\n                    this._callType = \"audio\";\n                } catch (e) {\n                    this.cleanup(false);\n                    this.setState(\"idle\", this.mediaErrorMsg(err));\n                    return;\n                }\n            } else {\n                this.cleanup(false);\n                this.setState(\"idle\", this.mediaErrorMsg(err));\n                return;\n            }\n        }\n        await _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n            type: \"call-accept\"\n        });\n        await this.startWebRTC(false);\n    }\n    async rejectCall() {\n        if (this._callState !== \"ringing\" || !this._remotePubkey) return;\n        this.clearCallTimeout();\n        this.stopRingtone();\n        _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n            type: \"call-reject\"\n        }).catch(()=>{});\n        this.cleanup(false);\n    }\n    mediaErrorMsg(err) {\n        if (err instanceof DOMException) {\n            if (err.name === \"NotAllowedError\") return \"Доступ к микрофону/камере запрещён. Разрешите в настройках браузера.\";\n            if (err.name === \"NotFoundError\") return \"Микрофон/камера не найдены. Подключите устройство.\";\n            if (err.name === \"NotReadableError\") return \"Устройство занято другим приложением.\";\n            return \"Ошибка: \".concat(err.message);\n        }\n        return \"Не удалось получить доступ к медиа\";\n    }\n    async startWebRTC(isInitiator) {\n        try {\n            this.pc = new RTCPeerConnection(ICE_CONFIG);\n            // Используем предзахваченный стрим\n            this.localStream = this.preStream;\n            this.preStream = null;\n            if (!this.localStream) {\n                this.localStream = await navigator.mediaDevices.getUserMedia({\n                    audio: true,\n                    video: this._callType === \"video\"\n                });\n            }\n            this.localStream.getTracks().forEach((track)=>{\n                this.pc.addTrack(track, this.localStream);\n            });\n            this.remoteStream = new MediaStream();\n            this.pc.ontrack = (event)=>{\n                if (event.streams[0]) {\n                    event.streams[0].getTracks().forEach((track)=>{\n                        this.remoteStream.addTrack(track);\n                    });\n                } else if (event.track) {\n                    this.remoteStream.addTrack(event.track);\n                }\n                this.notifyStreams();\n            };\n            this.pc.onicecandidate = (event)=>{\n                if (event.candidate && this._remotePubkey) {\n                    _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n                        type: \"webrtc-ice\",\n                        candidate: event.candidate.toJSON()\n                    }).catch(()=>{});\n                }\n            };\n            this.pc.oniceconnectionstatechange = ()=>{\n                var _this_pc;\n                const s = (_this_pc = this.pc) === null || _this_pc === void 0 ? void 0 : _this_pc.iceConnectionState;\n                if (s === \"connected\" || s === \"completed\") {\n                    this.setState(\"connected\");\n                } else if (s === \"failed\") {\n                    if (this.pc && isInitiator) {\n                        try {\n                            this.pc.restartIce();\n                        } catch (e) {\n                            this.endCall(\"Соединение прервано\");\n                        }\n                    } else {\n                        this.endCall(\"Соединение прервано\");\n                    }\n                } else if (s === \"disconnected\") {\n                    setTimeout(()=>{\n                        var _this_pc;\n                        if (((_this_pc = this.pc) === null || _this_pc === void 0 ? void 0 : _this_pc.iceConnectionState) === \"disconnected\") this.endCall(\"Соединение потеряно\");\n                    }, 7000);\n                }\n            };\n            this.notifyStreams();\n            if (isInitiator) {\n                const offer = await this.pc.createOffer({\n                    offerToReceiveAudio: true,\n                    offerToReceiveVideo: this._callType === \"video\"\n                });\n                await this.pc.setLocalDescription(offer);\n                await _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n                    type: \"webrtc-offer\",\n                    sdp: offer.sdp\n                });\n            }\n            for (const c of this.iceCandidateQueue){\n                try {\n                    await this.pc.addIceCandidate(new RTCIceCandidate(c));\n                } catch (e) {}\n            }\n            this.iceCandidateQueue = [];\n        } catch (err) {\n            this.endCall(this.mediaErrorMsg(err));\n        }\n    }\n    async handleOffer(sdp) {\n        if (!this.pc) return;\n        try {\n            await this.pc.setRemoteDescription(new RTCSessionDescription({\n                type: \"offer\",\n                sdp\n            }));\n            const answer = await this.pc.createAnswer();\n            await this.pc.setLocalDescription(answer);\n            await _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n                type: \"webrtc-answer\",\n                sdp: answer.sdp\n            });\n        } catch (e) {\n            console.error(\"handleOffer:\", e);\n        }\n    }\n    async handleAnswer(sdp) {\n        if (!this.pc) return;\n        try {\n            await this.pc.setRemoteDescription(new RTCSessionDescription({\n                type: \"answer\",\n                sdp\n            }));\n        } catch (e) {\n            console.error(\"handleAnswer:\", e);\n        }\n    }\n    async handleIceCandidate(candidate) {\n        if (!this.pc || !this.pc.remoteDescription) {\n            this.iceCandidateQueue.push(candidate);\n            return;\n        }\n        try {\n            await this.pc.addIceCandidate(new RTCIceCandidate(candidate));\n        } catch (e) {}\n    }\n    endCall(error) {\n        if (this._remotePubkey && this._callState !== \"idle\" && this._callState !== \"ended\") {\n            _nostr__WEBPACK_IMPORTED_MODULE_0__.nostrClient.sendWebRTCSignal(this._remotePubkey, {\n                type: \"call-end\"\n            }).catch(()=>{});\n        }\n        this.cleanup(false);\n        if (error) this.setState(\"idle\", error);\n    }\n    cleanup(silent) {\n        this.clearCallTimeout();\n        this.clearRetry();\n        this.stopRingtone();\n        if (this.preStream) {\n            this.preStream.getTracks().forEach((t)=>t.stop());\n            this.preStream = null;\n        }\n        if (this.localStream) {\n            this.localStream.getTracks().forEach((t)=>t.stop());\n            this.localStream = null;\n        }\n        if (this.remoteStream) {\n            this.remoteStream.getTracks().forEach((t)=>t.stop());\n            this.remoteStream = null;\n        }\n        if (this.pc) {\n            this.pc.close();\n            this.pc = null;\n        }\n        this.iceCandidateQueue = [];\n        this._remotePubkey = null;\n        this._callStartTime = 0;\n        if (!silent) this.setState(\"idle\");\n        this.notifyStreams();\n    }\n    toggleMute() {\n        if (!this.localStream) return false;\n        const t = this.localStream.getAudioTracks()[0];\n        if (t) {\n            t.enabled = !t.enabled;\n            return !t.enabled;\n        }\n        return false;\n    }\n    toggleVideo() {\n        if (!this.localStream) return false;\n        const t = this.localStream.getVideoTracks()[0];\n        if (t) {\n            t.enabled = !t.enabled;\n            return !t.enabled;\n        }\n        return false;\n    }\n    constructor(){\n        this.pc = null;\n        this.localStream = null;\n        this.remoteStream = null;\n        this._callState = \"idle\";\n        this._remotePubkey = null;\n        this._callType = \"audio\";\n        this.stateCallbacks = new Set();\n        this.streamCallbacks = new Set();\n        this.iceCandidateQueue = [];\n        this._callStartTime = 0;\n        this._unsubSignal = null;\n        this.callTimeout = null;\n        this.retryInterval = null;\n        this.audioCtx = null;\n        this.audioOsc = null;\n        // Предзахваченный стрим — берём медиа ДО звонка чтобы потом не ждать\n        this.preStream = null;\n        this.boundEndCall = this.endCall.bind(this, undefined);\n    }\n}\nconst webrtcManager = new WebRTCManager();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OEcsY0FBYyxFQUFFLENBQUMsRUFBRTtRQUM5QyxJQUFJRixHQUFHO1lBQUVBLEVBQUVHLE9BQU8sR0FBRyxDQUFDSCxFQUFFRyxPQUFPO1lBQUUsT0FBTyxDQUFDSCxFQUFFRyxPQUFPO1FBQUU7UUFDcEQsT0FBTztJQUNUO0lBRUFDLGNBQXVCO1FBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUNoSCxXQUFXLEVBQUUsT0FBTztRQUM5QixNQUFNNEcsSUFBSSxJQUFJLENBQUM1RyxXQUFXLENBQUNpSCxjQUFjLEVBQUUsQ0FBQyxFQUFFO1FBQzlDLElBQUlMLEdBQUc7WUFBRUEsRUFBRUcsT0FBTyxHQUFHLENBQUNILEVBQUVHLE9BQU87WUFBRSxPQUFPLENBQUNILEVBQUVHLE9BQU87UUFBRTtRQUNwRCxPQUFPO0lBQ1Q7O2FBbldRckMsS0FBK0I7YUFDL0IxRSxjQUFrQzthQUNsQ0MsZUFBbUM7YUFDbkN2QixhQUF3QjthQUN4QkUsZ0JBQStCO2FBQy9CRSxZQUFzQjthQUN0QkssaUJBQXlDLElBQUkrSDthQUM3QzNILGtCQUF1QyxJQUFJMkg7YUFDM0NsQixvQkFBMkMsRUFBRTthQUM3Q2hILGlCQUF5QjthQUN6QnVDLGVBQW9DO2FBQ3BDYyxjQUFvRDthQUNwRFcsZ0JBQXVEO2FBQ3ZEN0MsV0FBZ0M7YUFDaENFLFdBQWtDO1FBQzFDLHFFQUFxRTthQUM3RCtDLFlBQWdDO2FBQ2hDdEIsZUFBZSxJQUFJLENBQUMyRCxPQUFPLENBQUMwQixJQUFJLENBQUMsSUFBSSxFQUFFQzs7QUFtVmpEO0FBRU8sTUFBTUMsZ0JBQWdCLElBQUk3SSxnQkFBZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi93ZWJydGMudHM/MzFkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBub3N0ckNsaWVudCwgdHlwZSBXZWJSVENTaWduYWwgfSBmcm9tICcuL25vc3RyJztcblxuZXhwb3J0IHR5cGUgQ2FsbFN0YXRlID0gJ2lkbGUnIHwgJ2NhbGxpbmcnIHwgJ3JpbmdpbmcnIHwgJ2Nvbm5lY3RpbmcnIHwgJ2Nvbm5lY3RlZCcgfCAnZW5kZWQnO1xuZXhwb3J0IHR5cGUgQ2FsbFR5cGUgPSAnYXVkaW8nIHwgJ3ZpZGVvJztcblxudHlwZSBDYWxsU3RhdGVDYWxsYmFjayA9IChzdGF0ZTogQ2FsbFN0YXRlLCByZW1vdGVQdWJrZXk6IHN0cmluZyB8IG51bGwsIGNhbGxUeXBlOiBDYWxsVHlwZSwgZXJyb3I/OiBzdHJpbmcpID0+IHZvaWQ7XG50eXBlIFN0cmVhbUNhbGxiYWNrID0gKGxvY2FsOiBNZWRpYVN0cmVhbSB8IG51bGwsIHJlbW90ZTogTWVkaWFTdHJlYW0gfCBudWxsKSA9PiB2b2lkO1xuXG5jb25zdCBJQ0VfQ09ORklHOiBSVENDb25maWd1cmF0aW9uID0ge1xuICBpY2VTZXJ2ZXJzOiBbXG4gICAgeyB1cmxzOiAnc3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMicgfSxcbiAgICB7IHVybHM6ICdzdHVuOnN0dW4xLmwuZ29vZ2xlLmNvbToxOTMwMicgfSxcbiAgICB7IHVybHM6ICdzdHVuOnN0dW4uY2xvdWRmbGFyZS5jb206MzQ3OCcgfSxcbiAgICB7XG4gICAgICB1cmxzOiAndHVybjpvcGVucmVsYXkubWV0ZXJlZC5jYTo4MCcsXG4gICAgICB1c2VybmFtZTogJ29wZW5yZWxheXByb2plY3QnLFxuICAgICAgY3JlZGVudGlhbDogJ29wZW5yZWxheXByb2plY3QnLFxuICAgIH0sXG4gICAge1xuICAgICAgdXJsczogJ3R1cm46b3BlbnJlbGF5Lm1ldGVyZWQuY2E6NDQzJyxcbiAgICAgIHVzZXJuYW1lOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgICBjcmVkZW50aWFsOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgfSxcbiAgICB7XG4gICAgICB1cmxzOiAndHVybjpvcGVucmVsYXkubWV0ZXJlZC5jYTo0NDM/dHJhbnNwb3J0PXRjcCcsXG4gICAgICB1c2VybmFtZTogJ29wZW5yZWxheXByb2plY3QnLFxuICAgICAgY3JlZGVudGlhbDogJ29wZW5yZWxheXByb2plY3QnLFxuICAgIH0sXG4gIF0sXG4gIGljZUNhbmRpZGF0ZVBvb2xTaXplOiAxMCxcbn07XG5cbmNsYXNzIFdlYlJUQ01hbmFnZXIge1xuICBwcml2YXRlIHBjOiBSVENQZWVyQ29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxvY2FsU3RyZWFtOiBNZWRpYVN0cmVhbSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlbW90ZVN0cmVhbTogTWVkaWFTdHJlYW0gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfY2FsbFN0YXRlOiBDYWxsU3RhdGUgPSAnaWRsZSc7XG4gIHByaXZhdGUgX3JlbW90ZVB1YmtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2NhbGxUeXBlOiBDYWxsVHlwZSA9ICdhdWRpbyc7XG4gIHByaXZhdGUgc3RhdGVDYWxsYmFja3M6IFNldDxDYWxsU3RhdGVDYWxsYmFjaz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgc3RyZWFtQ2FsbGJhY2tzOiBTZXQ8U3RyZWFtQ2FsbGJhY2s+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGljZUNhbmRpZGF0ZVF1ZXVlOiBSVENJY2VDYW5kaWRhdGVJbml0W10gPSBbXTtcbiAgcHJpdmF0ZSBfY2FsbFN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdW5zdWJTaWduYWw6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNhbGxUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJldHJ5SW50ZXJ2YWw6IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGF1ZGlvQ3R4OiBBdWRpb0NvbnRleHQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhdWRpb09zYzogT3NjaWxsYXRvck5vZGUgfCBudWxsID0gbnVsbDtcbiAgLy8g0J/RgNC10LTQt9Cw0YXQstCw0YfQtdC90L3Ri9C5INGB0YLRgNC40Lwg4oCUINCx0LXRgNGR0Lwg0LzQtdC00LjQsCDQlNCeINC30LLQvtC90LrQsCDRh9GC0L7QsdGLINC/0L7RgtC+0Lwg0L3QtSDQttC00LDRgtGMXG4gIHByaXZhdGUgcHJlU3RyZWFtOiBNZWRpYVN0cmVhbSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kRW5kQ2FsbCA9IHRoaXMuZW5kQ2FsbC5iaW5kKHRoaXMsIHVuZGVmaW5lZCk7XG5cbiAgZ2V0IGNhbGxTdGF0ZSgpIHsgcmV0dXJuIHRoaXMuX2NhbGxTdGF0ZTsgfVxuICBnZXQgcmVtb3RlUHVia2V5KCkgeyByZXR1cm4gdGhpcy5fcmVtb3RlUHVia2V5OyB9XG4gIGdldCBjYWxsVHlwZSgpIHsgcmV0dXJuIHRoaXMuX2NhbGxUeXBlOyB9XG4gIGdldCBjYWxsU3RhcnRUaW1lKCkgeyByZXR1cm4gdGhpcy5fY2FsbFN0YXJ0VGltZTsgfVxuXG4gIG9uU3RhdGVDaGFuZ2UoY2I6IENhbGxTdGF0ZUNhbGxiYWNrKSB7IHRoaXMuc3RhdGVDYWxsYmFja3MuYWRkKGNiKTsgcmV0dXJuICgpID0+IHsgdGhpcy5zdGF0ZUNhbGxiYWNrcy5kZWxldGUoY2IpOyB9OyB9XG4gIG9uU3RyZWFtKGNiOiBTdHJlYW1DYWxsYmFjaykgeyB0aGlzLnN0cmVhbUNhbGxiYWNrcy5hZGQoY2IpOyByZXR1cm4gKCkgPT4geyB0aGlzLnN0cmVhbUNhbGxiYWNrcy5kZWxldGUoY2IpOyB9OyB9XG5cbiAgcHJpdmF0ZSBzZXRTdGF0ZShzdGF0ZTogQ2FsbFN0YXRlLCBlcnJvcj86IHN0cmluZykge1xuICAgIHRoaXMuX2NhbGxTdGF0ZSA9IHN0YXRlO1xuICAgIGlmIChzdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHsgdGhpcy5fY2FsbFN0YXJ0VGltZSA9IERhdGUubm93KCk7IHRoaXMuc3RvcFJpbmd0b25lKCk7IH1cbiAgICBpZiAoc3RhdGUgPT09ICdpZGxlJyB8fCBzdGF0ZSA9PT0gJ2VuZGVkJykgdGhpcy5zdG9wUmluZ3RvbmUoKTtcbiAgICB0aGlzLnN0YXRlQ2FsbGJhY2tzLmZvckVhY2goY2IgPT4gY2Ioc3RhdGUsIHRoaXMuX3JlbW90ZVB1YmtleSwgdGhpcy5fY2FsbFR5cGUsIGVycm9yKSk7XG4gIH1cblxuICBwcml2YXRlIG5vdGlmeVN0cmVhbXMoKSB7XG4gICAgdGhpcy5zdHJlYW1DYWxsYmFja3MuZm9yRWFjaChjYiA9PiBjYih0aGlzLmxvY2FsU3RyZWFtLCB0aGlzLnJlbW90ZVN0cmVhbSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBwbGF5UmluZ3RvbmUoKSB7XG4gICAgdGhpcy5zdG9wUmluZ3RvbmUoKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5hdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIHRoaXMuYXVkaW9Pc2MgPSB0aGlzLmF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIHRoaXMuYXVkaW9Pc2MuY29ubmVjdChnYWluKTtcbiAgICAgIGdhaW4uY29ubmVjdCh0aGlzLmF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcbiAgICAgIHRoaXMuYXVkaW9Pc2MuZnJlcXVlbmN5LnZhbHVlID0gNDQwO1xuICAgICAgZ2Fpbi5nYWluLnZhbHVlID0gMC4wODtcbiAgICAgIHRoaXMuYXVkaW9Pc2Muc3RhcnQoKTtcbiAgICAgIGNvbnN0IGN0eCA9IHRoaXMuYXVkaW9DdHg7XG4gICAgICBjb25zdCBwdWxzZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2NhbGxTdGF0ZSAhPT0gJ3JpbmdpbmcnIHx8ICF0aGlzLmF1ZGlvQ3R4KSB7IHRyeSB7IHRoaXMuYXVkaW9Pc2M/LnN0b3AoKTsgY3R4LmNsb3NlKCk7IH0gY2F0Y2gge30gcmV0dXJuOyB9XG4gICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjA4LCBjdHguY3VycmVudFRpbWUpO1xuICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgY3R4LmN1cnJlbnRUaW1lICsgMC41KTtcbiAgICAgICAgc2V0VGltZW91dChwdWxzZSwgMTIwMCk7XG4gICAgICB9O1xuICAgICAgcHVsc2UoKTtcbiAgICB9IGNhdGNoIHt9XG4gIH1cblxuICBwcml2YXRlIHN0b3BSaW5ndG9uZSgpIHtcbiAgICB0cnkgeyB0aGlzLmF1ZGlvT3NjPy5zdG9wKCk7IH0gY2F0Y2gge31cbiAgICB0cnkgeyB0aGlzLmF1ZGlvQ3R4Py5jbG9zZSgpOyB9IGNhdGNoIHt9XG4gICAgdGhpcy5hdWRpb09zYyA9IG51bGw7XG4gICAgdGhpcy5hdWRpb0N0eCA9IG51bGw7XG4gIH1cblxuICBpbml0KCkge1xuICAgIGlmICh0aGlzLl91bnN1YlNpZ25hbCkgcmV0dXJuO1xuICAgIHRoaXMuX3Vuc3ViU2lnbmFsID0gbm9zdHJDbGllbnQub25TaWduYWwoKGZyb20sIHNpZ25hbCkgPT4geyB0aGlzLmhhbmRsZVNpZ25hbChmcm9tLCBzaWduYWwpOyB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5ib3VuZEVuZENhbGwpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5ib3VuZEVuZENhbGwpO1xuICAgIGlmICh0aGlzLl91bnN1YlNpZ25hbCkgeyB0aGlzLl91bnN1YlNpZ25hbCgpOyB0aGlzLl91bnN1YlNpZ25hbCA9IG51bGw7IH1cbiAgICB0aGlzLmNsZWFudXAoZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTaWduYWwoZnJvbTogc3RyaW5nLCBzaWduYWw6IFdlYlJUQ1NpZ25hbCkge1xuICAgIHN3aXRjaCAoc2lnbmFsLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NhbGwtcmVxdWVzdCc6XG4gICAgICAgIGlmICh0aGlzLl9jYWxsU3RhdGUgIT09ICdpZGxlJykge1xuICAgICAgICAgIG5vc3RyQ2xpZW50LnNlbmRXZWJSVENTaWduYWwoZnJvbSwgeyB0eXBlOiAnY2FsbC1yZWplY3QnIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3RlUHVia2V5ID0gZnJvbTtcbiAgICAgICAgdGhpcy5fY2FsbFR5cGUgPSBzaWduYWwuY2FsbFR5cGUgfHwgJ2F1ZGlvJztcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgncmluZ2luZycpO1xuICAgICAgICB0aGlzLnBsYXlSaW5ndG9uZSgpO1xuICAgICAgICB0aGlzLmNhbGxUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7IGlmICh0aGlzLl9jYWxsU3RhdGUgPT09ICdyaW5naW5nJykgdGhpcy5yZWplY3RDYWxsKCk7IH0sIDQ1MDAwKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NhbGwtYWNjZXB0JzpcbiAgICAgICAgaWYgKCh0aGlzLl9jYWxsU3RhdGUgPT09ICdjYWxsaW5nJykgJiYgdGhpcy5fcmVtb3RlUHVia2V5ID09PSBmcm9tKSB7XG4gICAgICAgICAgdGhpcy5jbGVhclJldHJ5KCk7XG4gICAgICAgICAgdGhpcy5jbGVhckNhbGxUaW1lb3V0KCk7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSgnY29ubmVjdGluZycpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRXZWJSVEModHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NhbGwtcmVqZWN0JzpcbiAgICAgICAgaWYgKHRoaXMuX3JlbW90ZVB1YmtleSA9PT0gZnJvbSkgeyB0aGlzLmNsZWFudXAoZmFsc2UpOyB0aGlzLnNldFN0YXRlKCdpZGxlJywgJ9CX0LLQvtC90L7QuiDQvtGC0LrQu9C+0L3RkdC9Jyk7IH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NhbGwtZW5kJzpcbiAgICAgICAgaWYgKHRoaXMuX3JlbW90ZVB1YmtleSA9PT0gZnJvbSkgdGhpcy5jbGVhbnVwKGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3dlYnJ0Yy1vZmZlcic6XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdGVQdWJrZXkgPT09IGZyb20gJiYgc2lnbmFsLnNkcCkgYXdhaXQgdGhpcy5oYW5kbGVPZmZlcihzaWduYWwuc2RwKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3dlYnJ0Yy1hbnN3ZXInOlxuICAgICAgICBpZiAodGhpcy5fcmVtb3RlUHVia2V5ID09PSBmcm9tICYmIHNpZ25hbC5zZHApIGF3YWl0IHRoaXMuaGFuZGxlQW5zd2VyKHNpZ25hbC5zZHApO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnd2VicnRjLWljZSc6XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdGVQdWJrZXkgPT09IGZyb20gJiYgc2lnbmFsLmNhbmRpZGF0ZSkgYXdhaXQgdGhpcy5oYW5kbGVJY2VDYW5kaWRhdGUoc2lnbmFsLmNhbmRpZGF0ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJDYWxsVGltZW91dCgpIHsgaWYgKHRoaXMuY2FsbFRpbWVvdXQpIHsgY2xlYXJUaW1lb3V0KHRoaXMuY2FsbFRpbWVvdXQpOyB0aGlzLmNhbGxUaW1lb3V0ID0gbnVsbDsgfSB9XG4gIHByaXZhdGUgY2xlYXJSZXRyeSgpIHsgaWYgKHRoaXMucmV0cnlJbnRlcnZhbCkgeyBjbGVhckludGVydmFsKHRoaXMucmV0cnlJbnRlcnZhbCk7IHRoaXMucmV0cnlJbnRlcnZhbCA9IG51bGw7IH0gfVxuXG4gIGFzeW5jIGluaXRpYXRlQ2FsbChwdWJrZXk6IHN0cmluZywgdHlwZTogQ2FsbFR5cGUpIHtcbiAgICBpZiAodGhpcy5fY2FsbFN0YXRlICE9PSAnaWRsZScpIHJldHVybjtcblxuICAgIC8vINCX0LDRhdCy0LDRgtGL0LLQsNC10Lwg0LzQtdC00LjQsCDQodCg0JDQl9CjIOKAlCDQtdGB0LvQuCDQvdC1INC/0L7Qu9GD0YfQuNGC0YHRjywg0YHQvtC+0LHRidCw0LXQvCDQtNC+INC90LDRh9Cw0LvQsCDQt9Cy0L7QvdC60LBcbiAgICB0cnkge1xuICAgICAgdGhpcy5wcmVTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiB7IGVjaG9DYW5jZWxsYXRpb246IHRydWUsIG5vaXNlU3VwcHJlc3Npb246IHRydWUsIGF1dG9HYWluQ29udHJvbDogdHJ1ZSB9LFxuICAgICAgICB2aWRlbzogdHlwZSA9PT0gJ3ZpZGVvJyA/IHsgd2lkdGg6IHsgaWRlYWw6IDEyODAgfSwgaGVpZ2h0OiB7IGlkZWFsOiA3MjAgfSwgZmFjaW5nTW9kZTogJ3VzZXInIH0gOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8g0JXRgdC70Lgg0LLQuNC00LXQviDQvdC1INC/0L7Qu9GD0YfQuNC70L7RgdGMIOKAlCDQv9GA0L7QsdGD0LXQvCDRgtC+0LvRjNC60L4g0LDRg9C00LjQvlxuICAgICAgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnByZVN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9KTtcbiAgICAgICAgICB0eXBlID0gJ2F1ZGlvJztcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScsIHRoaXMubWVkaWFFcnJvck1zZyhlcnIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2lkbGUnLCB0aGlzLm1lZGlhRXJyb3JNc2coZXJyKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9yZW1vdGVQdWJrZXkgPSBwdWJrZXk7XG4gICAgdGhpcy5fY2FsbFR5cGUgPSB0eXBlO1xuICAgIHRoaXMuc2V0U3RhdGUoJ2NhbGxpbmcnKTtcblxuICAgIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8IGNhbGwtcmVxdWVzdCDQuCDQv9C+0LLRgtC+0YDRj9C10Lwg0LrQsNC20LTRi9C1IDMg0YHQtdC6IChOb3N0ciDQvdC10L3QsNC00ZHQttC10L0pXG4gICAgY29uc3Qgc2VuZFJlcSA9ICgpID0+IHtcbiAgICAgIG5vc3RyQ2xpZW50LnNlbmRXZWJSVENTaWduYWwocHVia2V5LCB7IHR5cGU6ICdjYWxsLXJlcXVlc3QnLCBjYWxsVHlwZTogdHlwZSB9KS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgfTtcbiAgICBzZW5kUmVxKCk7XG4gICAgdGhpcy5yZXRyeUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2NhbGxTdGF0ZSA9PT0gJ2NhbGxpbmcnKSBzZW5kUmVxKCk7XG4gICAgICBlbHNlIHRoaXMuY2xlYXJSZXRyeSgpO1xuICAgIH0sIDMwMDApO1xuXG4gICAgLy8g0KLQsNC50LzQsNGD0YIgNDAg0YHQtdC6XG4gICAgdGhpcy5jYWxsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2NhbGxTdGF0ZSA9PT0gJ2NhbGxpbmcnKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cCh0cnVlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScsICfQndC10YIg0L7RgtCy0LXRgtCwJyk7XG4gICAgICB9XG4gICAgfSwgNDAwMDApO1xuICB9XG5cbiAgYXN5bmMgYWNjZXB0Q2FsbCgpIHtcbiAgICBpZiAodGhpcy5fY2FsbFN0YXRlICE9PSAncmluZ2luZycgfHwgIXRoaXMuX3JlbW90ZVB1YmtleSkgcmV0dXJuO1xuICAgIHRoaXMuY2xlYXJDYWxsVGltZW91dCgpO1xuICAgIHRoaXMuc3RvcFJpbmd0b25lKCk7XG4gICAgdGhpcy5zZXRTdGF0ZSgnY29ubmVjdGluZycpO1xuXG4gICAgLy8g0JfQsNGF0LLQsNGC0YvQstCw0LXQvCDQvNC10LTQuNCwINC/0YDQuCDQv9GA0LjQvdGP0YLQuNC4XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucHJlU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICBhdWRpbzogeyBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLCBub2lzZVN1cHByZXNzaW9uOiB0cnVlLCBhdXRvR2FpbkNvbnRyb2w6IHRydWUgfSxcbiAgICAgICAgdmlkZW86IHRoaXMuX2NhbGxUeXBlID09PSAndmlkZW8nID8geyB3aWR0aDogeyBpZGVhbDogMTI4MCB9LCBoZWlnaHQ6IHsgaWRlYWw6IDcyMCB9LCBmYWNpbmdNb2RlOiAndXNlcicgfSA6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAodGhpcy5fY2FsbFR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgdHJ5IHsgdGhpcy5wcmVTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0cnVlIH0pOyB0aGlzLl9jYWxsVHlwZSA9ICdhdWRpbyc7IH1cbiAgICAgICAgY2F0Y2ggeyB0aGlzLmNsZWFudXAoZmFsc2UpOyB0aGlzLnNldFN0YXRlKCdpZGxlJywgdGhpcy5tZWRpYUVycm9yTXNnKGVycikpOyByZXR1cm47IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2xlYW51cChmYWxzZSk7IHRoaXMuc2V0U3RhdGUoJ2lkbGUnLCB0aGlzLm1lZGlhRXJyb3JNc2coZXJyKSk7IHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCBub3N0ckNsaWVudC5zZW5kV2ViUlRDU2lnbmFsKHRoaXMuX3JlbW90ZVB1YmtleSwgeyB0eXBlOiAnY2FsbC1hY2NlcHQnIH0pO1xuICAgIGF3YWl0IHRoaXMuc3RhcnRXZWJSVEMoZmFsc2UpO1xuICB9XG5cbiAgYXN5bmMgcmVqZWN0Q2FsbCgpIHtcbiAgICBpZiAodGhpcy5fY2FsbFN0YXRlICE9PSAncmluZ2luZycgfHwgIXRoaXMuX3JlbW90ZVB1YmtleSkgcmV0dXJuO1xuICAgIHRoaXMuY2xlYXJDYWxsVGltZW91dCgpOyB0aGlzLnN0b3BSaW5ndG9uZSgpO1xuICAgIG5vc3RyQ2xpZW50LnNlbmRXZWJSVENTaWduYWwodGhpcy5fcmVtb3RlUHVia2V5LCB7IHR5cGU6ICdjYWxsLXJlamVjdCcgfSkuY2F0Y2goKCkgPT4ge30pO1xuICAgIHRoaXMuY2xlYW51cChmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIG1lZGlhRXJyb3JNc2coZXJyOiB1bmtub3duKTogc3RyaW5nIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSB7XG4gICAgICBpZiAoZXJyLm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSByZXR1cm4gJ9CU0L7RgdGC0YPQvyDQuiDQvNC40LrRgNC+0YTQvtC90YMv0LrQsNC80LXRgNC1INC30LDQv9GA0LXRidGR0L0uINCg0LDQt9GA0LXRiNC40YLQtSDQsiDQvdCw0YHRgtGA0L7QudC60LDRhSDQsdGA0LDRg9C30LXRgNCwLic7XG4gICAgICBpZiAoZXJyLm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJykgcmV0dXJuICfQnNC40LrRgNC+0YTQvtC9L9C60LDQvNC10YDQsCDQvdC1INC90LDQudC00LXQvdGLLiDQn9C+0LTQutC70Y7Rh9C40YLQtSDRg9GB0YLRgNC+0LnRgdGC0LLQvi4nO1xuICAgICAgaWYgKGVyci5uYW1lID09PSAnTm90UmVhZGFibGVFcnJvcicpIHJldHVybiAn0KPRgdGC0YDQvtC50YHRgtCy0L4g0LfQsNC90Y/RgtC+INC00YDRg9Cz0LjQvCDQv9GA0LjQu9C+0LbQtdC90LjQtdC8Lic7XG4gICAgICByZXR1cm4gYNCe0YjQuNCx0LrQsDogJHtlcnIubWVzc2FnZX1gO1xuICAgIH1cbiAgICByZXR1cm4gJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0L/QvtC70YPRh9C40YLRjCDQtNC+0YHRgtGD0L8g0Log0LzQtdC00LjQsCc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0YXJ0V2ViUlRDKGlzSW5pdGlhdG9yOiBib29sZWFuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oSUNFX0NPTkZJRyk7XG5cbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INC/0YDQtdC00LfQsNGF0LLQsNGH0LXQvdC90YvQuSDRgdGC0YDQuNC8XG4gICAgICB0aGlzLmxvY2FsU3RyZWFtID0gdGhpcy5wcmVTdHJlYW07XG4gICAgICB0aGlzLnByZVN0cmVhbSA9IG51bGw7XG5cbiAgICAgIGlmICghdGhpcy5sb2NhbFN0cmVhbSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgIHZpZGVvOiB0aGlzLl9jYWxsVHlwZSA9PT0gJ3ZpZGVvJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgIHRoaXMucGMhLmFkZFRyYWNrKHRyYWNrLCB0aGlzLmxvY2FsU3RyZWFtISk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5yZW1vdGVTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcblxuICAgICAgdGhpcy5wYy5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5zdHJlYW1zWzBdKSB7XG4gICAgICAgICAgZXZlbnQuc3RyZWFtc1swXS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3RlU3RyZWFtIS5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHJhY2spIHtcbiAgICAgICAgICB0aGlzLnJlbW90ZVN0cmVhbSEuYWRkVHJhY2soZXZlbnQudHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90aWZ5U3RyZWFtcygpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5wYy5vbmljZWNhbmRpZGF0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY2FuZGlkYXRlICYmIHRoaXMuX3JlbW90ZVB1YmtleSkge1xuICAgICAgICAgIG5vc3RyQ2xpZW50LnNlbmRXZWJSVENTaWduYWwodGhpcy5fcmVtb3RlUHVia2V5LCB7XG4gICAgICAgICAgICB0eXBlOiAnd2VicnRjLWljZScsXG4gICAgICAgICAgICBjYW5kaWRhdGU6IGV2ZW50LmNhbmRpZGF0ZS50b0pTT04oKSxcbiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMucGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBjPy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgICAgIGlmIChzID09PSAnY29ubmVjdGVkJyB8fCBzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoJ2Nvbm5lY3RlZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdmYWlsZWQnKSB7XG4gICAgICAgICAgaWYgKHRoaXMucGMgJiYgaXNJbml0aWF0b3IpIHtcbiAgICAgICAgICAgIHRyeSB7IHRoaXMucGMucmVzdGFydEljZSgpOyB9IGNhdGNoIHsgdGhpcy5lbmRDYWxsKCfQodC+0LXQtNC40L3QtdC90LjQtSDQv9GA0LXRgNCy0LDQvdC+Jyk7IH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmRDYWxsKCfQodC+0LXQtNC40L3QtdC90LjQtSDQv9GA0LXRgNCy0LDQvdC+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHMgPT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYz8uaWNlQ29ubmVjdGlvblN0YXRlID09PSAnZGlzY29ubmVjdGVkJykgdGhpcy5lbmRDYWxsKCfQodC+0LXQtNC40L3QtdC90LjQtSDQv9C+0YLQtdGA0Y/QvdC+Jyk7XG4gICAgICAgICAgfSwgNzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMubm90aWZ5U3RyZWFtcygpO1xuXG4gICAgICBpZiAoaXNJbml0aWF0b3IpIHtcbiAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZU9mZmVyKHtcbiAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLFxuICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86IHRoaXMuX2NhbGxUeXBlID09PSAndmlkZW8nLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYy5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgYXdhaXQgbm9zdHJDbGllbnQuc2VuZFdlYlJUQ1NpZ25hbCh0aGlzLl9yZW1vdGVQdWJrZXkhLCB7XG4gICAgICAgICAgdHlwZTogJ3dlYnJ0Yy1vZmZlcicsXG4gICAgICAgICAgc2RwOiBvZmZlci5zZHAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgdGhpcy5pY2VDYW5kaWRhdGVRdWV1ZSkge1xuICAgICAgICB0cnkgeyBhd2FpdCB0aGlzLnBjLmFkZEljZUNhbmRpZGF0ZShuZXcgUlRDSWNlQ2FuZGlkYXRlKGMpKTsgfSBjYXRjaCB7fVxuICAgICAgfVxuICAgICAgdGhpcy5pY2VDYW5kaWRhdGVRdWV1ZSA9IFtdO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVuZENhbGwodGhpcy5tZWRpYUVycm9yTXNnKGVycikpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlT2ZmZXIoc2RwOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMucGMpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsgdHlwZTogJ29mZmVyJywgc2RwIH0pKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXMucGMuY3JlYXRlQW5zd2VyKCk7XG4gICAgICBhd2FpdCB0aGlzLnBjLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgIGF3YWl0IG5vc3RyQ2xpZW50LnNlbmRXZWJSVENTaWduYWwodGhpcy5fcmVtb3RlUHVia2V5ISwgeyB0eXBlOiAnd2VicnRjLWFuc3dlcicsIHNkcDogYW5zd2VyLnNkcCB9KTtcbiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoJ2hhbmRsZU9mZmVyOicsIGUpOyB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUFuc3dlcihzZHA6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5wYykgcmV0dXJuO1xuICAgIHRyeSB7IGF3YWl0IHRoaXMucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7IHR5cGU6ICdhbnN3ZXInLCBzZHAgfSkpOyB9XG4gICAgY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcignaGFuZGxlQW5zd2VyOicsIGUpOyB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUljZUNhbmRpZGF0ZShjYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZUluaXQpIHtcbiAgICBpZiAoIXRoaXMucGMgfHwgIXRoaXMucGMucmVtb3RlRGVzY3JpcHRpb24pIHsgdGhpcy5pY2VDYW5kaWRhdGVRdWV1ZS5wdXNoKGNhbmRpZGF0ZSk7IHJldHVybjsgfVxuICAgIHRyeSB7IGF3YWl0IHRoaXMucGMuYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKSk7IH0gY2F0Y2gge31cbiAgfVxuXG4gIGVuZENhbGwoZXJyb3I/OiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fcmVtb3RlUHVia2V5ICYmIHRoaXMuX2NhbGxTdGF0ZSAhPT0gJ2lkbGUnICYmIHRoaXMuX2NhbGxTdGF0ZSAhPT0gJ2VuZGVkJykge1xuICAgICAgbm9zdHJDbGllbnQuc2VuZFdlYlJUQ1NpZ25hbCh0aGlzLl9yZW1vdGVQdWJrZXksIHsgdHlwZTogJ2NhbGwtZW5kJyB9KS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgfVxuICAgIHRoaXMuY2xlYW51cChmYWxzZSk7XG4gICAgaWYgKGVycm9yKSB0aGlzLnNldFN0YXRlKCdpZGxlJywgZXJyb3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwKHNpbGVudDogYm9vbGVhbikge1xuICAgIHRoaXMuY2xlYXJDYWxsVGltZW91dCgpO1xuICAgIHRoaXMuY2xlYXJSZXRyeSgpO1xuICAgIHRoaXMuc3RvcFJpbmd0b25lKCk7XG4gICAgaWYgKHRoaXMucHJlU3RyZWFtKSB7IHRoaXMucHJlU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godCA9PiB0LnN0b3AoKSk7IHRoaXMucHJlU3RyZWFtID0gbnVsbDsgfVxuICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtKSB7IHRoaXMubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0ID0+IHQuc3RvcCgpKTsgdGhpcy5sb2NhbFN0cmVhbSA9IG51bGw7IH1cbiAgICBpZiAodGhpcy5yZW1vdGVTdHJlYW0pIHsgdGhpcy5yZW1vdGVTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0ID0+IHQuc3RvcCgpKTsgdGhpcy5yZW1vdGVTdHJlYW0gPSBudWxsOyB9XG4gICAgaWYgKHRoaXMucGMpIHsgdGhpcy5wYy5jbG9zZSgpOyB0aGlzLnBjID0gbnVsbDsgfVxuICAgIHRoaXMuaWNlQ2FuZGlkYXRlUXVldWUgPSBbXTtcbiAgICB0aGlzLl9yZW1vdGVQdWJrZXkgPSBudWxsO1xuICAgIHRoaXMuX2NhbGxTdGFydFRpbWUgPSAwO1xuICAgIGlmICghc2lsZW50KSB0aGlzLnNldFN0YXRlKCdpZGxlJyk7XG4gICAgdGhpcy5ub3RpZnlTdHJlYW1zKCk7XG4gIH1cblxuICB0b2dnbGVNdXRlKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5sb2NhbFN0cmVhbSkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHQgPSB0aGlzLmxvY2FsU3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07XG4gICAgaWYgKHQpIHsgdC5lbmFibGVkID0gIXQuZW5hYmxlZDsgcmV0dXJuICF0LmVuYWJsZWQ7IH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0b2dnbGVWaWRlbygpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMubG9jYWxTdHJlYW0pIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCB0ID0gdGhpcy5sb2NhbFN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgIGlmICh0KSB7IHQuZW5hYmxlZCA9ICF0LmVuYWJsZWQ7IHJldHVybiAhdC5lbmFibGVkOyB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3ZWJydGNNYW5hZ2VyID0gbmV3IFdlYlJUQ01hbmFnZXIoKTtcbiJdLCJuYW1lcyI6WyJub3N0ckNsaWVudCIsIklDRV9DT05GSUciLCJpY2VTZXJ2ZXJzIiwidXJscyIsInVzZXJuYW1lIiwiY3JlZGVudGlhbCIsImljZUNhbmRpZGF0ZVBvb2xTaXplIiwiV2ViUlRDTWFuYWdlciIsImNhbGxTdGF0ZSIsIl9jYWxsU3RhdGUiLCJyZW1vdGVQdWJrZXkiLCJfcmVtb3RlUHVia2V5IiwiY2FsbFR5cGUiLCJfY2FsbFR5cGUiLCJjYWxsU3RhcnRUaW1lIiwiX2NhbGxTdGFydFRpbWUiLCJvblN0YXRlQ2hhbmdlIiwiY2IiLCJzdGF0ZUNhbGxiYWNrcyIsImFkZCIsImRlbGV0ZSIsIm9uU3RyZWFtIiwic3RyZWFtQ2FsbGJhY2tzIiwic2V0U3RhdGUiLCJzdGF0ZSIsImVycm9yIiwiRGF0ZSIsIm5vdyIsInN0b3BSaW5ndG9uZSIsImZvckVhY2giLCJub3RpZnlTdHJlYW1zIiwibG9jYWxTdHJlYW0iLCJyZW1vdGVTdHJlYW0iLCJwbGF5UmluZ3RvbmUiLCJhdWRpb0N0eCIsIkF1ZGlvQ29udGV4dCIsImF1ZGlvT3NjIiwiY3JlYXRlT3NjaWxsYXRvciIsImdhaW4iLCJjcmVhdGVHYWluIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwiZnJlcXVlbmN5IiwidmFsdWUiLCJzdGFydCIsImN0eCIsInB1bHNlIiwic3RvcCIsImNsb3NlIiwic2V0VmFsdWVBdFRpbWUiLCJjdXJyZW50VGltZSIsImV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUiLCJzZXRUaW1lb3V0IiwiaW5pdCIsIl91bnN1YlNpZ25hbCIsIm9uU2lnbmFsIiwiZnJvbSIsInNpZ25hbCIsImhhbmRsZVNpZ25hbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3VuZEVuZENhbGwiLCJkZXN0cm95IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsZWFudXAiLCJ0eXBlIiwic2VuZFdlYlJUQ1NpZ25hbCIsImNhdGNoIiwiY2FsbFRpbWVvdXQiLCJyZWplY3RDYWxsIiwiY2xlYXJSZXRyeSIsImNsZWFyQ2FsbFRpbWVvdXQiLCJzdGFydFdlYlJUQyIsInNkcCIsImhhbmRsZU9mZmVyIiwiaGFuZGxlQW5zd2VyIiwiY2FuZGlkYXRlIiwiaGFuZGxlSWNlQ2FuZGlkYXRlIiwiY2xlYXJUaW1lb3V0IiwicmV0cnlJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpbml0aWF0ZUNhbGwiLCJwdWJrZXkiLCJwcmVTdHJlYW0iLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJhdWRpbyIsImVjaG9DYW5jZWxsYXRpb24iLCJub2lzZVN1cHByZXNzaW9uIiwiYXV0b0dhaW5Db250cm9sIiwidmlkZW8iLCJ3aWR0aCIsImlkZWFsIiwiaGVpZ2h0IiwiZmFjaW5nTW9kZSIsImVyciIsIm1lZGlhRXJyb3JNc2ciLCJzZW5kUmVxIiwic2V0SW50ZXJ2YWwiLCJhY2NlcHRDYWxsIiwiRE9NRXhjZXB0aW9uIiwibmFtZSIsIm1lc3NhZ2UiLCJpc0luaXRpYXRvciIsInBjIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJnZXRUcmFja3MiLCJ0cmFjayIsImFkZFRyYWNrIiwiTWVkaWFTdHJlYW0iLCJvbnRyYWNrIiwiZXZlbnQiLCJzdHJlYW1zIiwib25pY2VjYW5kaWRhdGUiLCJ0b0pTT04iLCJvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSIsInMiLCJpY2VDb25uZWN0aW9uU3RhdGUiLCJyZXN0YXJ0SWNlIiwiZW5kQ2FsbCIsIm9mZmVyIiwiY3JlYXRlT2ZmZXIiLCJvZmZlclRvUmVjZWl2ZUF1ZGlvIiwib2ZmZXJUb1JlY2VpdmVWaWRlbyIsInNldExvY2FsRGVzY3JpcHRpb24iLCJjIiwiaWNlQ2FuZGlkYXRlUXVldWUiLCJhZGRJY2VDYW5kaWRhdGUiLCJSVENJY2VDYW5kaWRhdGUiLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsIlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiIsImFuc3dlciIsImNyZWF0ZUFuc3dlciIsImUiLCJjb25zb2xlIiwicmVtb3RlRGVzY3JpcHRpb24iLCJwdXNoIiwic2lsZW50IiwidCIsInRvZ2dsZU11dGUiLCJnZXRBdWRpb1RyYWNrcyIsImVuYWJsZWQiLCJ0b2dnbGVWaWRlbyIsImdldFZpZGVvVHJhY2tzIiwiU2V0IiwiYmluZCIsInVuZGVmaW5lZCIsIndlYnJ0Y01hbmFnZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/webrtc.ts\n"));

/***/ })

});